---
title: "Geofencing"
description: "Search for places within geographic boundaries and proximity-based queries"
---

## Overview

The Geofencing API enables location-based searches to find places within specific geographic areas. Use it to discover nearby places, search within custom boundaries, or filter by distance.

## Key Features

- **Radius Search** - Find places within a specific distance from a point
- **Polygon Search** - Search within custom geographic boundaries
- **Category Filtering** - Filter results by place type or category
- **Sorting & Ranking** - Order results by distance, relevance, or custom criteria
- **Proximity Queries** - Efficient nearest-neighbor searches

## Quick Start

<Steps>
  <Step title="Basic Radius Search">
    Search for places within a radius of a central point:
    
    <CodeGroup>
    
    ```javascript Node.js
    const response = await fetch(
      'https://reprompt--reprompt-fastapi-fastapi-app.us-west.modal.run/{org_slug}/geofencing/search',
      {
        method: 'POST',
        headers: {
          'Authorization': 'Bearer YOUR_API_KEY',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          center: {
            latitude: 40.7128,
            longitude: -74.0060
          },
          radius_meters: 1000,
          limit: 20
        })
      }
    );
    
    const results = await response.json();
    console.log(`Found ${results.places.length} places`);
    ```
    
    ```python Python
    import requests
    
    response = requests.post(
        'https://reprompt--reprompt-fastapi-fastapi-app.us-west.modal.run/{org_slug}/geofencing/search',
        headers={
            'Authorization': 'Bearer YOUR_API_KEY',
            'Content-Type': 'application/json'
        },
        json={
            'center': {
                'latitude': 40.7128,
                'longitude': -74.0060
            },
            'radius_meters': 1000,
            'limit': 20
        }
    )
    
    results = response.json()
    print(f"Found {len(results['places'])} places")
    ```
    
    </CodeGroup>
  </Step>
  
  <Step title="Filter by Category">
    Narrow your search to specific place types:
    
    ```javascript
    const response = await fetch(url, {
      method: 'POST',
      headers: headers,
      body: JSON.stringify({
        center: { latitude: 40.7128, longitude: -74.0060 },
        radius_meters: 1000,
        categories: ['restaurant', 'cafe'],
        limit: 10
      })
    });
    ```
  </Step>
  
  <Step title="Process Results">
    Iterate through the returned places:
    
    ```javascript
    const results = await response.json();
    
    results.places.forEach(place => {
      console.log(`${place.name} - ${place.distance_meters}m away`);
      console.log(`  Address: ${place.address}`);
      console.log(`  Category: ${place.category}`);
    });
    ```
  </Step>
</Steps>

## Search Parameters

### Required
- **center**: Object with `latitude` and `longitude`
- **radius_meters**: Search radius in meters

### Optional
- **categories**: Array of category filters
- **limit**: Maximum number of results (default: 20, max: 100)
- **offset**: Pagination offset
- **sort_by**: Sort criteria (`distance`, `relevance`, `name`)
- **include_attributes**: Additional attributes to include in response

## Response Format

```json
{
  "places": [
    {
      "place_id": "place_abc123",
      "name": "Central Cafe",
      "latitude": 40.7130,
      "longitude": -74.0062,
      "distance_meters": 45.2,
      "category": "cafe",
      "address": "456 Park Ave, New York, NY 10001",
      "attributes": {
        "rating": 4.5,
        "price_level": 2,
        "hours": "Mon-Fri 7am-6pm"
      }
    }
  ],
  "total_count": 15,
  "search_metadata": {
    "center": { "latitude": 40.7128, "longitude": -74.0060 },
    "radius_meters": 1000,
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```

## Advanced Examples

### Polygon Search

Define a custom boundary using a polygon:

<CodeGroup>

```javascript Node.js
const response = await fetch(url, {
  method: 'POST',
  headers: headers,
  body: JSON.stringify({
    polygon: {
      coordinates: [
        [40.7128, -74.0060],
        [40.7138, -74.0050],
        [40.7120, -74.0040],
        [40.7110, -74.0055],
        [40.7128, -74.0060]  // Close the polygon
      ]
    },
    categories: ['restaurant'],
    limit: 50
  })
});
```

```python Python
response = requests.post(
    url,
    headers=headers,
    json={
        'polygon': {
            'coordinates': [
                [40.7128, -74.0060],
                [40.7138, -74.0050],
                [40.7120, -74.0040],
                [40.7110, -74.0055],
                [40.7128, -74.0060]  # Close the polygon
            ]
        },
        'categories': ['restaurant'],
        'limit': 50
    }
)
```

</CodeGroup>

### Multi-Category Search

Search for multiple place types:

```javascript
const response = await fetch(url, {
  method: 'POST',
  headers: headers,
  body: JSON.stringify({
    center: { latitude: 40.7128, longitude: -74.0060 },
    radius_meters: 2000,
    categories: [
      'restaurant',
      'cafe',
      'bar',
      'fast_food'
    ],
    sort_by: 'distance',
    limit: 30
  })
});
```

## Pagination

Handle large result sets with pagination:

```javascript
async function getAllPlaces(center, radius) {
  const allPlaces = [];
  let offset = 0;
  const limit = 100;
  
  while (true) {
    const response = await fetch(url, {
      method: 'POST',
      headers: headers,
      body: JSON.stringify({
        center,
        radius_meters: radius,
        limit,
        offset
      })
    });
    
    const results = await response.json();
    allPlaces.push(...results.places);
    
    if (results.places.length < limit) break;
    offset += limit;
  }
  
  return allPlaces;
}
```

## Distance Calculations

Results include pre-calculated distances from your center point. Distances are in meters by default.

## Performance Tips

<Tip>
  - Use smaller radius values for faster searches
  - Apply category filters to reduce result sets
  - Use pagination for large queries
  - Cache frequently used search results
</Tip>

## Common Use Cases

### Find Nearby Restaurants

```javascript
const nearbyRestaurants = await searchGeofence({
  center: userLocation,
  radius_meters: 500,
  categories: ['restaurant'],
  sort_by: 'distance',
  limit: 10
});
```

### Delivery Zone Validation

```javascript
const inDeliveryZone = await searchGeofence({
  polygon: deliveryBoundary,
  center: customerAddress,
  radius_meters: 1
});

const canDeliver = inDeliveryZone.places.length > 0;
```

### Location Intelligence

```javascript
const competitorAnalysis = await searchGeofence({
  center: storeLe,
  radius_meters: 5000,
  categories: ['retail', 'shopping'],
  include_attributes: ['rating', 'price_level', 'review_count']
});
```

## Next Steps

- Learn about [Place Enrichment](/guides/place-enrichment) to enhance your location data
- Explore [Batch Processing](/guides/batch-processing) for bulk geofencing operations
- Check the [API Reference](/api-reference) for complete endpoint documentation
